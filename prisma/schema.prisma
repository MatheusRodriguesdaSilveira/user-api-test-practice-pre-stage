generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String    @id @default(uuid())
  name       String
  email      String    @unique
  password   String
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())

  @@map("users")
}

model Category {
  id         String    @id @default(uuid())
  name       String
  created_at DateTime? @default(now())
  updated_at DateTime? @default(now())
  services   Service[]

  @@map("categories")
}

model Service {
  id          String    @id @default(uuid())
  name        String
  description String
  image       String
  created_at  DateTime? @default(now())
  updated_at  DateTime? @default(now())
  price       Decimal   @default(0.00) @db.Decimal(10, 2)

  category     Category      @relation(fields: [category_id], references: [id])
  category_id  String
  appointments Appointment[]

  @@map("services")
}

model Appointment {
  id               String    @id @default(uuid())
  client_name      String
  client_phone     String?
  appointment_date DateTime
  status           Boolean   @default(false)
  draft            Boolean   @default(true)
  name             String?
  created_at       DateTime? @default(now())
  updated_at       DateTime? @default(now())

  // relacionamento direto com Service
  service    Service @relation(fields: [service_id], references: [id])
  service_id String

  @@map("appointments")
}
